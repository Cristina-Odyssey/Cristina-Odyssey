<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚ôªÔ∏è The Big Waste Sorting Quiz</title>
<style>
  body {
    font-family: sans-serif;
    background-color: #eaf9f0;
    color: #333;
    max-width: 800px;
    margin: 40px auto;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    overflow-x: hidden;
  }
  h1 { text-align: center; color: #2e7d32; }
  .question { margin-bottom: 20px; font-size: 1.2em; }
  .answers button {
    display: block;
    margin: 8px 0;
    padding: 10px;
    width: 100%;
    font-size: 1em;
    background-color: #d7f9e9;
    border: 2px solid #2e7d32;
    border-radius: 5px;
    cursor: pointer;
    transition: 0.3s;
  }
  .answers button:hover { background-color: #a5f0c5; transform: scale(1.03); }
  .feedback {
    margin-top: 10px;
    padding: 15px;
    border-left: 4px solid #2e7d32;
    background: #f4fff8;
    display: none;
    animation: fadeIn 0.5s ease-in-out;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .funny { color: #388e3c; margin-top: 5px; }
  .serious { color: #00695c; font-style: italic; margin-top: 5px; }
  .result {
    text-align: center;
    font-size: 1.3em;
    padding: 20px;
    background-color: #c8f7dc;
    border-radius: 10px;
    display: none;
  }
  .confetti {
    position: fixed;
    top: 0;
    width: 100%;
    height: 0;
    pointer-events: none;
    overflow: visible;
  }
  .piece {
    position: absolute;
    width: 10px;
    height: 20px;
    background-color: #ffb300;
    animation: fall 3s linear forwards;
  }
  @keyframes fall {
    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
  }
</style>
</head>
<body>

<h1>‚ôªÔ∏è The Big Waste Sorting Quiz</h1>

<div id="nameInput">
  <label>Enter your name:</label>
  <input type="text" id="playerNameInput" placeholder="Your name">
  <button onclick="startQuiz()">Start Quiz ‚û°Ô∏è</button>
</div>

<div id="quiz" style="display:none;"></div>
<div class="result" id="result"></div>
<div class="confetti" id="confetti"></div>

<!-- Sounds -->
<audio id="goodSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="badSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<audio id="winSound" src="https://actions.google.com/sounds/v1/alarms/air_horn.ogg"></audio>

<script>
let playerName = "";
let current = 0;
let score = 0;
let answersLog = [];

const quizData = [
  { q: "An empty pizza box with grease stains belongs in‚Ä¶", options: ["Paper bin","Residual waste","Organic waste"], correct: 1,
    funny: "A greasy pizza box is kryptonite for any paper factory.",
    uitleg: "Grease makes paper unusable for recycling. Only clean paper can go in the paper bin!",
    serious: "Greasy paper can ruin an entire recycling batch ‚Äì wasting water and energy." },

  { q: "Where should a tea bag go?", options: ["Organic waste","Paper","Residual waste"], correct: 0,
    funny: "Tea with a touch of compost ‚Äì nature loves it!",
    uitleg: "Tea bags without plastic can go into organic waste.",
    serious: "Properly separating tea bags produces thousands of tons of compost every year." },

  { q: "Should you rinse plastic bottles first?", options: ["Yes","No","Sometimes"], correct: 0,
    funny: "Rinse them, or the rain won‚Äôt taste right.",
    uitleg: "Residue makes recycling harder.",
    serious: "Clean plastic is recycled more efficiently." },

  { q: "A soda can belongs in‚Ä¶", options: ["PMD","Residual waste","Organic waste"], correct: 0,
    funny: "Aluminum is worth its weight in recycling gold.",
    uitleg: "Cans go in PMD (Plastic, Metal, Drink cartons).",
    serious: "Aluminum can be recycled infinitely without losing quality." },

  { q: "Organic waste should not contain:", options: ["Fruit","Plastic bags","Coffee grounds"], correct: 1,
    funny: "Plastic doesn‚Äôt like compost parties.",
    uitleg: "Only organic waste belongs in the organic bin.",
    serious: "Plastic in organic waste disrupts composting and can damage machines." },

  { q: "A glass bottle belongs in‚Ä¶", options: ["Glass bin","Residual waste","PMD"], correct: 0,
    funny: "No glass in your shoe, only in the glass bin!",
    uitleg: "All glass bottles and jars go in the glass bin.",
    serious: "Glass can be fully recycled without losing quality." },

  { q: "Tetra Pak (drink cartons) belongs in‚Ä¶", options: ["PMD","Residual waste","Organic waste"], correct: 0,
    funny: "Tetra Pak is PMD‚Äôs favorite pet.",
    uitleg: "Drink cartons go in PMD.",
    serious: "Paper, aluminum, and plastic are recycled separately." },

  { q: "Coffee filters belong in‚Ä¶", options: ["Organic waste","Residual waste","Paper"], correct: 0,
    funny: "Filter + coffee = compost magic!",
    uitleg: "Paper filters and coffee grounds are compostable.",
    serious: "Sorting coffee waste helps produce high-quality compost." },

  { q: "Styrofoam belongs in‚Ä¶", options: ["Residual waste","PMD","Organic waste"], correct: 0,
    funny: "Fluffy but not recyclable in PMD.",
    uitleg: "Styrofoam usually cannot be recycled, so it goes in residual waste.",
    serious: "Incorrectly sorted foam can damage recycling machines." },

  { q: "Used batteries should be thrown in‚Ä¶", options: ["Recycling center","Residual waste","PMD"], correct: 0,
    funny: "Batteries are tiny energy bombs ‚Äì recycling center is safe!",
    uitleg: "Batteries contain heavy metals, never throw them in residual waste.",
    serious: "Special collection prevents soil and water pollution." },

  { q: "Plastic bags belong in‚Ä¶", options: ["PMD","Residual waste","Organic waste"], correct: 1,
    funny: "Bag full of deception ‚Äì so residual waste it is.",
    uitleg: "Plastic bags usually go in residual waste unless specifically collected.",
    serious: "Plastic bags can jam machinery in PMD processing." },

  { q: "Vegetable and fruit waste belongs in‚Ä¶", options: ["Organic waste","Residual waste","PMD"], correct: 0,
    funny: "Banana peels need their own little party.",
    uitleg: "Organic waste like vegetables and fruit goes into organic waste bins.",
    serious: "Composting helps reduce CO2 emissions." },

  { q: "Paper with plastic coating belongs in‚Ä¶", options: ["Residual waste","Paper bin","PMD"], correct: 0,
    funny: "Plastic has a secret agenda in the paper bin.",
    uitleg: "Paper with foil cannot be recycled.",
    serious: "Incorrectly sorted paper disrupts the entire paper factory." },

  { q: "Cooking oil should be disposed in‚Ä¶", options: ["Residual waste","Special collection","Organic waste"], correct: 1,
    funny: "Oil in the sewer? No, thanks!",
    uitleg: "Cooking oil goes to special collection points.",
    serious: "Cooking oil in the sewer can damage pipes and wastewater treatment." },

  { q: "An empty shampoo bottle belongs in‚Ä¶", options: ["PMD","Residual waste","Organic waste"], correct: 0,
    funny: "Flubber in the PMD bin!",
    uitleg: "Plastic bottles go in PMD, remove the caps.",
    serious: "Proper separation helps recyclers obtain high-quality plastic." },

  { q: "Batteries in toys belong in‚Ä¶", options: ["Recycling center","Residual waste","PMD"], correct: 0,
    funny: "No explosion in your trash!",
    uitleg: "All batteries go to collection points.",
    serious: "Protects against heavy metals and toxic substances." },

  { q: "Styrofoam packaging belongs in‚Ä¶", options: ["Residual waste","PMD","Organic waste"], correct: 0,
    funny: "Light but not PMD-worthy.",
    uitleg: "Styrofoam is usually not recycled, so residual waste.",
    serious: "Incorrectly sorted foam can block machinery." },

  { q: "Cardboard without food residues belongs in‚Ä¶", options: ["Paper bin","Residual waste","PMD"], correct: 0,
    funny: "Cardboard hero, clean and dry!",
    uitleg: "Clean cardboard can be perfectly recycled.",
    serious: "Paper recycling saves trees and energy." },

  { q: "Medicines should be disposed in‚Ä¶", options: ["Pharmacy","Residual waste","Organic waste"], correct: 0,
    funny: "Pills go to the pharmacy, not to the worms.",
    uitleg: "Returning medicines to the pharmacy prevents environmental damage.",
    serious: "Medicines in sewage harm aquatic life." },

  { q: "Lamp glass belongs in‚Ä¶", options: ["Recycling center","Glass bin","Residual waste"], correct: 0,
    funny: "Light bulbs don‚Äôt belong with ordinary bottles.",
    uitleg: "Incandescent and fluorescent lamps contain substances that must be processed separately.",
    serious: "Safe processing prevents mercury and glass pollution." },
];

];

const quiz = document.getElementById("quiz");
const resultDiv = document.getElementById("result");

function startQuiz() {
  const input = document.getElementById("playerNameInput").value.trim();
  if(!input) { alert("Please enter your name first!"); return; }
  playerName = input;
  document.getElementById("nameInput").style.display = "none";
  quiz.style.display = "block";
  loadQuestion();
}

function loadQuestion() {
  const qData = quizData[current];
  quiz.innerHTML = `
    <div class="question"><b>Question ${current+1}:</b> ${qData.q}</div>
    <div class="answers">
      ${qData.options.map((opt,i)=>`<button onclick="checkAnswer(${i})">${String.fromCharCode(65+i)}) ${opt}</button>`).join("")}
    </div>
    <div class="feedback" id="feedback"></div>
  `;
}

function playSound(type) {
  const sound = document.getElementById(type);
  if (sound) { sound.currentTime = 0; sound.play(); }
}

function checkAnswer(choice) {
  const qData = quizData[current];
  const feedback = document.getElementById("feedback");
  const correct = choice === qData.correct;

  answersLog.push({
    question: qData.q,
    chosen: qData.options[choice],
    correct: correct
  });

  correct ? playSound("goodSound") : playSound("badSound");
  if(correct) score++;

  feedback.style.display = "block";
  feedback.innerHTML = `
    <b>${correct ? "‚úÖ Correct!" : "‚ùå Oops!"}</b><br>
    <p>${qData.explanation}</p>
    <p class="funny">üòÇ ${qData.funny}</p>
    <p class="serious">üåç ${qData.serious}</p>
    <button onclick="nextQuestion()">Next question ‚û°Ô∏è</button>
  `;
  document.querySelectorAll(".answers button").forEach(btn => btn.disabled = true);
}

function nextQuestion() {
  current++;
  if(current < quizData.length) loadQuestion();
  else showResult();
}

function showResult() {
  quiz.style.display = "none";
  let message = "";
  if(score >= 15) {
    message = "üåü Eco-hero! You sort waste like a pro.";
    playSound("winSound");
    launchConfetti();
  } else if(score >= 11) message = "üåø Conscientious citizen! Just a few more tweaks.";
  else if(score >= 6) message = "‚öôÔ∏è Doing well, but there is room for improvement.";
  else message = "üòÖ Time for a waste revolution in your kitchen!";

  resultDiv.style.display = "block";
  resultDiv.innerHTML = `<h2>Your score: ${score}/${quizData.length}</h2><p>${message}</p>`;

  saveScore(score);
}

function launchConfetti() {
  const confetti = document.getElementById("confetti");
  for(let i=0;i<100;i++){
    const piece = document.createElement("div");
    piece.className = "piece";
    piece.style.left = Math.random()*100 + "vw";
    piece.style.backgroundColor = `hsl(${Math.random()*360},70%,60%)`;
    piece.style.animationDelay = Math.random() * 1 + "s";
    piece.style.width = Math.random()*8 +5 +"px";
    piece.style.height = Math.random()*15 +10 +"px";
    confetti.appendChild(piece);
    setTimeout(()=>piece.remove(),4000);
  }
}

function saveScore(score) {
  const WEB_APP_URL = "https://script.google.com/macros/s/YOUR_WEB_APP_ID_HERE/exec";
  fetch(WEB_APP_URL, {
    method: "POST",
    body: JSON.stringify({
      name: playerName,
      score: score,
      answers: answersLog
    })
  }).catch(err => console.log("Score not saved:", err));
}
</script>
</body>
</html>

